<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Ricochet Robots</title>
<script src="https://d3js.org/d3.v5.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style.css">
<script src="logic.js"></script>
</head>
<body>
<div id="head">
<div id="alltime">&nbsp;</div>
<div id="time">&nbsp;</div>
<h1>Ricochet Robots</h1>
<div id="points">
  <span id="turn">&nbsp;</span>
  <div>Runde: <span id="round">1</span><br>Ziele: <span id="targets">0</span><br>Züge: <span id="fullpoints">0</span></div>
</div>
<div id="allpoints">&nbsp;</div>
</div>
<div id="wrap">
<div id="map"></div>
<div id="solutionwrapper">
</div>
</div>
<div id="players"></div>
<!--<div id="anleitung">Tastatursteuerung: 1-4 Roboterauswahl, Pfeiltasten Bewegung, Backspace Schritt zurück, Escape auf Anfang. Klicken geht auch.</div>-->
<script>
// TODO: purge d3, should not be difficult without
// TODO: purge font awesome?

// TODO make countdown seconds after solution found a variable?
// TODO make use of fifth robot a variable?
// TODO: give up finding a solution, or a shorter solution - if everyone gives up, fine
// TODO: give ghosts a non-transparent :after for the arrow pointer depending from which direction the arrow comes
// TODO: anleitung (ricochet robots rules, bedienung)
// TODO: display other players in game somewhere convenient (plain text list below, centered)
var path = "http://localhost/"
var scale = 20;
var colors = ["red", "blue", "yellow", "green", "black"];
var directions = ["up", "left", "down", "right"];

var turn; // gets set every turn
var map; // gets set on map creation
var game; // gets set on game start

var ajaxtime = Date.now(); // time the last ajax request was sent
var ajaxspeed = 5000;//200; // milliseconds between ajax requests

var data = { // ajax data
  game: {robots: [], pieces: [], seed: 0, round: 0, solved: null, solution: null},
  me: {name: "Gast", targets: 0, points: 0, round: 0, solved: null, solution: null}
}

var ismine = false; // whether or not the found solution is by the player

var players = []; // received data from other players

ajax("init", {}, init, solo);
</script>
</body>
</html>
